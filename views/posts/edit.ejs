<div class="container">
    <div class="row">
        <div class="col mt-4 mb-2">
            <h4>Edit Post</h4>
        </div>
    </div>

    <div class="row">
        <div class="col mt-2">
            <%- include ("./../partials/_alert_messages") %>
        </div>
    </div>

    <div class="row">
        <div class="col mb-4">
            <form action="/posts/<%= post._id %>" method="POST">
                <input type="hidden" name="_method" value="PUT">
                <div class="form-group">
                    <label for="title">Title</label>
                    <input type="text" class="form-control" id="title" name="title" value="<%= post.title %>" required>
                </div>

                <div class="form-group">
                    <label for="tags">Tags <span class="text-muted">(semicolon-separated)</span></label>
                    <input type="text" class="form-control" id="tags" name="tags" required value=<% if (post.tags.length > 0) { %>
                        <% let str = ''; %>
                        <% post.tags.forEach(function(tag, index, array){ %>
                            <% str += tag; %>
                            <%  if (index !== (array.length -1)) { str += ';' } %>
                        <% }); %> 
                        <%= str %>
                    <% }; %>>
                </div>

                <div class="form-group">
                    <label for="status">Status</label>
                    <select class="form-control" id="status" name="status">
                        <option value="private" <%= post.status == 'private' ? 'selected' : '' %>>Private</option>
                        <option value="protected" <%= post.status == 'protected' ? 'selected' : '' %>>Protected</option>
                        <option value="public" <%= post.status == 'public' ? 'selected' : '' %>>Public</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="body">Post Content</label>
                    <textarea class="form-control" name="body" id="body" rows="10" required><%= post.body %></textarea>
                </div>

                <div class="container clearfix ">
                    <a href="/dashboard" class="btn btn-secondary px-4 ml-2 float-right">Cancel</a>
                    <input type="submit" value="Save" class="btn btn-primary px-4 float-right">
                </div>
            </form>
        </div>
    </div>
</div>